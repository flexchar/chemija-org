---
import type { Exam } from '../utils/sanity';

interface Props {
  exam: Exam;
}

const { exam } = Astro.props;

// Format the date to Lithuanian locale
const formattedDate = exam.examDate 
  ? new Date(exam.examDate).toLocaleDateString('lt-LT', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : '';

// Map exam type to readable Lithuanian text
const examTypeMap = {
  vbe: 'Valstybinis brandos egzaminas',
  mbe: 'Mokyklinis brandos egzaminas',
  trial: 'Bandomasis egzaminas',
  other: 'Kitas egzaminas'
};

type ExamTypeKey = keyof typeof examTypeMap;

const examTypeText = exam.examType 
  ? (examTypeMap[exam.examType as ExamTypeKey] || exam.examType)
  : '';
---

<div class="exam-card">
  <div class="exam-card__content">
    <h3 class="exam-card__title">{exam.title}</h3>
    
    <div class="exam-card__meta">
      <span class="exam-card__type">{examTypeText}</span>
      <time class="exam-card__date" datetime={exam.examDate}>{formattedDate}</time>
    </div>
    
    {exam.description && <p class="exam-card__description">{exam.description}</p>}
    
    <div class="exam-card__actions">
      {exam.questionsFile && (
        <a 
          href={exam.questionsFile.asset.url} 
          class="exam-card__button exam-card__button--questions"
          target="_blank"
          rel="noopener noreferrer"
        >
          UÅ¾duotys
        </a>
      )}
      
      {exam.answersFile && (
        <a 
          href={exam.answersFile.asset.url} 
          class="exam-card__button exam-card__button--answers"
          target="_blank"
          rel="noopener noreferrer"
        >
          Atsakymai
        </a>
      )}
    </div>
  </div>
</div>

<style>
  .exam-card {
    @apply bg-white rounded-lg shadow overflow-hidden transition-all duration-200 hover:shadow-md;
  }
  
  .exam-card__content {
    @apply p-4;
  }
  
  .exam-card__title {
    @apply text-lg font-bold mb-2;
  }
  
  .exam-card__meta {
    @apply flex items-center justify-between text-sm text-gray-600 mb-2;
  }
  
  .exam-card__type {
    @apply text-xs font-medium bg-green-50 text-green-700 px-2 py-0.5 rounded;
  }
  
  .exam-card__date {
    @apply text-xs;
  }
  
  .exam-card__description {
    @apply text-sm text-gray-700 mb-3;
  }
  
  .exam-card__actions {
    @apply flex gap-2 mt-2;
  }
  
  .exam-card__button {
    @apply inline-block px-3 py-1.5 text-xs font-medium rounded transition-colors duration-200;
  }
  
  .exam-card__button--questions {
    @apply bg-blue-600 text-white hover:bg-blue-700;
  }
  
  .exam-card__button--answers {
    @apply bg-emerald-600 text-white hover:bg-emerald-700;
  }
</style> 